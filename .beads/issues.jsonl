{"id":"ccc-006","title":"Add /status command for detailed session info","description":"New command showing: session uptime, last activity, memory usage, current working directory, recent commands count.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T14:39:00.944144694Z","created_by":"wlad","updated_at":"2026-01-09T16:06:50.566010765Z","closed_at":"2026-01-09T16:06:50.566010765Z","close_reason":"Closed","dependencies":[{"issue_id":"ccc-006","depends_on_id":"ccc-c5a","type":"blocks","created_at":"2026-01-09T14:39:28.046525765Z","created_by":"wlad"}]}
{"id":"ccc-04v","title":"Bug: tmux —Å–µ—Å—Å–∏–∏ Claude –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ –ø—Ä–µ—Ä—ã–≤–∞—é—Ç—Å—è","description":"–°–µ—Å—Å–∏–∏ tmux —Å Claude Code –Ω–µ–æ–∂–∏–¥–∞–Ω–Ω–æ –ø—Ä–µ—Ä—ã–≤–∞—é—Ç—Å—è/–ø–∞–¥–∞—é—Ç.\n\n–î–û–ë–ê–í–õ–ï–ù–û –õ–û–ì–ò–†–û–í–ê–ù–ò–ï:\n- –í–∫–ª—é—á–µ–Ω–æ CCC_TMUX_VERBOSE=1 –≤ systemd —Å–µ—Ä–≤–∏—Å–µ\n- tmux —Ç–µ–ø–µ—Ä—å –ø–∏—à–µ—Ç –ª–æ–≥–∏ –≤ tmux-server-PID.log –∏ tmux-client-PID.log\n- –õ–æ–≥–∏ –±—É–¥—É—Ç –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –≥–¥–µ –∑–∞–ø—É—â–µ–Ω ccc\n\n–û–ñ–ò–î–ê–ï–ú:\n–ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –ø–∞–¥–µ–Ω–∏–∏ —Å–µ—Å—Å–∏–∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ tmux –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –ø—Ä–∏—á–∏–Ω—ã.\n\n–ò–°–¢–û–†–ò–Ø:\n- /exit –≤ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ç–µ - –ª–æ–∂–Ω—ã–π —Å–ª–µ–¥, Claude –∑–∞–≤–µ—Ä—à–∏–ª—Å—è, –Ω–æ tmux —Å–µ—Å—Å–∏—è —Ç–æ–∂–µ —É–ø–∞–ª–∞\n- –ü–∞–º—è—Ç—å –∏ –¥–∏—Å–∫ –≤ –Ω–æ—Ä–º–µ\n- –ù–µ—Ç OOM kills","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-16T12:43:54.239751465Z","created_by":"wlad","updated_at":"2026-01-16T13:04:30.982631172Z","closed_at":"2026-01-16T13:04:30.982631172Z","close_reason":"Root cause: systemd default KillMode=control-group kills tmux server when ccc service restarts. Fix: Added KillMode=process to ~/.config/systemd/user/ccc.service.d/verbose.conf. Now only the main ccc process will be killed on restart, leaving tmux sessions intact."}
{"id":"ccc-0hv","title":"AskUserQuestion forwarding to Telegram (inline keyboard)","description":"Port PreToolUse hook handling of AskUserQuestion from upstream.\n\n## New subcommand:\n- `ccc hook-permission` ‚Äî called by Claude Code PreToolUse hook\n\n## hook-permission flow for AskUserQuestion:\n1. Read stdin JSON (hookData with toolName, toolInput, cwd)\n2. If toolName == 'AskUserQuestion' and questions present:\n   - For each question: send ‚ùì message with inline keyboard buttons\n   - Button callback data: `{sessionName}:{qIdx}:{totalQuestions}:{optionIdx}`\n   - Return immediately (don't block Claude)\n\n## Telegram callback handling:\nAdd to Telegram update loop:\n1. Parse CallbackQuery from updates\n2. Parse callback data string\n3. Edit original message (append ‚úì Selected, remove keyboard)\n4. Send to tmux: Down arrow √ó optionIndex, then Enter\n5. If last question: extra Enter after 300ms to auto-submit\n\n## New Telegram types needed:\n- CallbackQuery struct\n- InlineKeyboardButton / InlineKeyboardMarkup\n- sendMessageWithKeyboard()\n- answerCallbackQuery()\n- editMessageRemoveKeyboard()\n\n## Also store in history:\n- Question as {from:'claude', text:'‚ùì ...'} \n- Answer as {from:'human', text:'Selected: option label'}\n\nRef: upstream hooks.go:262-313, commands.go:750-798","status":"closed","priority":1,"issue_type":"task","owner":"wlad@wlad.com.ua","created_at":"2026-02-23T00:28:40.333824533Z","created_by":"wlad","updated_at":"2026-02-23T01:18:38.407776559Z","closed_at":"2026-02-23T01:18:38.407776559Z","close_reason":"Deployed to all 4 machines. PreToolUse hook + inline keyboard + callback handler with remote support + auto-submit.","dependencies":[{"issue_id":"ccc-0hv","depends_on_id":"ccc-32v","type":"blocks","created_at":"2026-02-23T00:28:59.367424467Z","created_by":"wlad"}]}
{"id":"ccc-0x7","title":"Add /undo command to cancel last message","description":"Send Ctrl+C to tmux session to interrupt Claude. Useful when wrong message sent or want to cancel long operation.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-09T14:39:13.490091586Z","created_by":"wlad","updated_at":"2026-01-09T14:39:13.490091586Z","dependencies":[{"issue_id":"ccc-0x7","depends_on_id":"ccc-c5a","type":"blocks","created_at":"2026-01-09T14:39:28.083575057Z","created_by":"wlad"}]}
{"id":"ccc-1a6","title":"Add file logging for hooks (client and server mode)","description":"Hook stderr goes nowhere. Add file logging to ~/.ccc/hooks.log for debugging hook issues. Log: timestamp, hook type, cwd, message sent, errors.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-21T05:11:44.126323419Z","created_by":"wlad","updated_at":"2026-01-21T05:13:51.432000735Z","closed_at":"2026-01-21T05:13:51.432000735Z","close_reason":"Added logHook() function that writes to ~/.ccc/hooks.log with timestamp, hook type and message"}
{"id":"ccc-1l3","title":"Pin session info message in topic","description":"When topic created, send and pin a message with session info: path, host, created time, quick commands reference. Update on status changes.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-09T14:38:55.699729059Z","created_by":"wlad","updated_at":"2026-01-09T14:38:55.699729059Z","dependencies":[{"issue_id":"ccc-1l3","depends_on_id":"ccc-c5a","type":"blocks","created_at":"2026-01-09T14:39:27.991231419Z","created_by":"wlad"}]}
{"id":"ccc-20v","title":"Comprehensive API test plan for P0 (ask filter) and P1 (history capture)","notes":"Test plan written. Phases: 1=debug filter, 2=history capture, 3=edge cases, 4=cleanup. Ready to execute.","status":"in_progress","priority":1,"issue_type":"task","owner":"wlad@wlad.com.ua","created_at":"2026-02-19T13:04:37.953640161Z","created_by":"wlad","updated_at":"2026-02-19T13:05:21.008933003Z"}
{"id":"ccc-32v","title":"Hooks infrastructure: Stop hook + extractLastTurn + installHook","description":"Port from upstream and adapt to our codebase.\n\n## New subcommands:\n- `ccc hook-stop` ‚Äî called by Claude Code Stop hook\n- `ccc install-hook` / `ccc uninstall-hook` ‚Äî manage ~/.claude/settings.json\n\n## hook-stop flow:\n1. Read stdin JSON (hookData with transcriptPath, cwd, sessionId)\n2. Match session via findSession(cwd)\n3. Call extractLastTurn(transcriptPath) to parse JSONL transcript\n4. Send text blocks to Telegram with ‚úÖ prefix (like upstream)\n5. Store in history via appendHistory()\n\n## extractLastTurn(transcriptPath):\nPort from upstream hooks.go:99-241. Key logic:\n- Parse JSONL file, handle both nested (message.content) and flat formats\n- Find last real user message (skip tool_results)\n- Collect assistant text blocks after it\n- Streaming dedup by requestId (last entry wins)\n- Return []string of text blocks\n\n## installHook:\nPort from upstream hooks.go:458-537. Writes to ~/.claude/settings.json:\n- Stop hook: `ccc hook-stop`\n- PreToolUse hook: `ccc hook-permission` (for subtask 2)\n\n## Remove after validation:\n- captureResponseAsync()\n- captureClaudeResponse()\n- isClaudeUIArtifact()\n- getLastClaudeResponse()\n- All debug logging in capture functions\n\n## Keep:\n- captureTmuxPane() for screenshot API\n- checkClaudeState() for busy/idle\n- appendHistoryDedup() (still needed for dedup)\n\nRef: upstream hooks.go:50-260","status":"closed","priority":1,"issue_type":"task","owner":"wlad@wlad.com.ua","created_at":"2026-02-23T00:28:34.049060062Z","created_by":"wlad","updated_at":"2026-02-23T00:58:02.321918386Z","closed_at":"2026-02-23T00:58:02.321918386Z","close_reason":"Deployed to all machines. Stop hook with extractLastTurn, capture-pane code removed."}
{"id":"ccc-4zc","title":"Improve error handling with wrapped errors","description":"Use fmt.Errorf with %w for error wrapping. Add context to errors for better debugging.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-09T14:27:34.247100716Z","created_by":"wlad","updated_at":"2026-01-09T14:27:34.247100716Z","dependencies":[{"issue_id":"ccc-4zc","depends_on_id":"ccc-9l2","type":"blocks","created_at":"2026-01-09T14:28:18.420492069Z","created_by":"wlad"}]}
{"id":"ccc-5r1","title":"Truncate repeating characters (\u003e10) in screenshot output","description":"When displaying screenshot in Telegram, if a character repeats more than 10 times consecutively, truncate and show count in brackets. E.g. '================' becomes '=(16)'","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-19T04:55:00.570296731Z","created_by":"wlad","updated_at":"2026-01-19T05:17:37.534494509Z","closed_at":"2026-01-19T05:17:37.534494509Z","close_reason":"Added truncateRepeatingChars() that compresses runs of \u003e10 chars to char(count) format","dependencies":[{"issue_id":"ccc-5r1","depends_on_id":"ccc-8fe","type":"blocks","created_at":"2026-01-19T04:55:07.293045703Z","created_by":"wlad"}]}
{"id":"ccc-5wp","title":"Code Architecture: Split monolithic main.go into packages","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-01-09T14:27:00.873121755Z","created_by":"wlad","updated_at":"2026-01-09T14:48:30.607783609Z","closed_at":"2026-01-09T14:48:30.607783609Z","close_reason":"Closed"}
{"id":"ccc-6kf","title":"Show progress message with elapsed time","description":"When Claude starts processing, send '‚è≥ Processing...' message. Update it every 10s with elapsed time. Replace with response when done. Uses editMessageText.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-09T14:38:57.080003103Z","created_by":"wlad","updated_at":"2026-01-09T14:38:57.080003103Z","dependencies":[{"issue_id":"ccc-6kf","depends_on_id":"ccc-c5a","type":"blocks","created_at":"2026-01-09T14:39:28.009510356Z","created_by":"wlad"}]}
{"id":"ccc-82e","title":"Test hooks + transcript + Q\u0026A scenarios","description":"Integration testing for the hooks epic.\n\n## Test scenarios:\n\n### 1. Stop hook + transcript JSONL\n- Send message to local session via API\n- Wait for Claude to finish\n- Verify: hook fires, extractLastTurn reads transcript, response in history\n- Compare with old capture-pane result (should be identical or better)\n\n### 2. AskUserQuestion via Telegram\n- Trigger a Claude action that causes AskUserQuestion\n- Verify: inline keyboard appears in Telegram\n- Press button, verify: option selected in tmux, answer recorded in history\n\n### 3. AskUserQuestion via API\n- Same trigger as #2\n- Verify: question visible via {cmd:questions} API\n- Answer via {cmd:answer} API\n- Verify: option selected, answer recorded\n\n### 4. Remote session\n- Test hook-stop on remote machine forwarding to server\n- Verify: response appears in server history\n\n### 5. Regression\n- screenshot API still works (captureTmuxPane preserved)\n- checkClaudeState still works\n- History dedup still works\n\n### 6. Edge cases\n- Long responses (previously truncated ‚Äî should work now)\n- Multiple text blocks in one response\n- Streaming dedup (multiple entries with same requestId)","status":"open","priority":2,"issue_type":"task","owner":"wlad@wlad.com.ua","created_at":"2026-02-23T00:28:56.023474879Z","created_by":"wlad","updated_at":"2026-02-23T00:28:56.023474879Z","dependencies":[{"issue_id":"ccc-82e","depends_on_id":"ccc-x6h","type":"blocks","created_at":"2026-02-23T00:28:59.44918232Z","created_by":"wlad"}]}
{"id":"ccc-89v","title":"Refactor main.go into separate files","description":"main.go is 5500+ lines and growing. Split into logical files following upstream pattern: commands.go (API handlers), hooks.go (hook handlers), telegram.go (Telegram client), tmux.go (tmux operations), session.go (session management). Upstream went from ~5800 to 411 lines in main.go. Keep package main, no internal/ packages.","status":"open","priority":2,"issue_type":"task","owner":"wlad@wlad.com.ua","created_at":"2026-02-20T19:54:39.275079275Z","created_by":"wlad","updated_at":"2026-02-20T19:54:39.275079275Z"}
{"id":"ccc-8fe","title":"Implement /screenshot command - show last 50 lines of tmux session","description":"Add /screenshot command that captures and sends last 50 lines from the active tmux session to Telegram, allowing user to see current terminal state","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-01-19T04:54:53.824044591Z","created_by":"wlad","updated_at":"2026-01-19T05:13:34.472236753Z","closed_at":"2026-01-19T05:13:34.472236753Z","close_reason":"Implemented captureTmuxPane() and /screenshot command handler"}
{"id":"ccc-9l2","title":"Reliability: Error handling, logging, and resilience","status":"open","priority":3,"issue_type":"epic","created_at":"2026-01-09T14:27:04.119575651Z","created_by":"wlad","updated_at":"2026-01-09T14:27:04.119575651Z"}
{"id":"ccc-9tz","title":"Add session reconnection on network failures","description":"When SSH connection to remote host drops, attempt automatic reconnection. Show status in /list.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-09T14:28:00.134889609Z","created_by":"wlad","updated_at":"2026-01-09T14:28:00.134889609Z","dependencies":[{"issue_id":"ccc-9tz","depends_on_id":"ccc-9l2","type":"blocks","created_at":"2026-01-09T14:28:18.477496481Z","created_by":"wlad"}]}
{"id":"ccc-c5a","title":"Telegram UX: Improve user feedback and interactivity","description":"Enhance Telegram integration with better status indicators, feedback, and interactive elements.","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-09T14:38:24.299072264Z","created_by":"wlad","updated_at":"2026-01-09T14:38:24.299072264Z"}
{"id":"ccc-c5e","title":"Add structured logging with log levels","description":"Replace fmt.Printf calls with structured logger (zerolog/slog). Add log levels for debugging remote host issues.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-09T14:27:32.761332917Z","created_by":"wlad","updated_at":"2026-01-09T14:27:32.761332917Z","dependencies":[{"issue_id":"ccc-c5e","depends_on_id":"ccc-9l2","type":"blocks","created_at":"2026-01-09T14:28:18.401032818Z","created_by":"wlad"}]}
{"id":"ccc-d8a","title":"Add integration tests for tmux session operations","description":"Test createTmuxSession, attachTmuxSession, killTmuxSession with real tmux. Currently only unit tests exist in main_test.go.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-09T14:27:31.166031024Z","created_by":"wlad","updated_at":"2026-01-09T14:27:31.166031024Z","dependencies":[{"issue_id":"ccc-d8a","depends_on_id":"ccc-nwv","type":"blocks","created_at":"2026-01-09T14:28:15.786458212Z","created_by":"wlad"}]}
{"id":"ccc-dcp","title":"External Agent API: REST API –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –≤–Ω–µ—à–Ω–∏—Ö –∞–≥–µ–Ω—Ç–æ–≤ —Å CCC","description":"## Overview\nLocal API for external agents (orchestrators) to interact with Claude Code sessions through CCC.\n\n## Use Cases\n\n### 1. Request-Response (Orchestrator asks a question)\n- User asks orchestrator about a project\n- Orchestrator determines the relevant session\n- Sends question via CCC API\n- Waits for Claude's response (or polls history)\n- Returns answer to user\n\n### 2. Background Monitoring\n- Orchestrator subscribes to sessions\n- Receives stream of events (messages, status changes)\n- Maintains awareness of what's happening across projects\n\n## Technical Design\n\n### Transport\n- **Unix Socket**: `~/.ccc.sock`\n- **Protocol**: Newline-delimited JSON\n- **Connection modes**: \n  - Short-lived (sessions, ask, send, history)\n  - Persistent (subscribe)\n\n### API Commands\n\n```json\n// List sessions\n{\"cmd\": \"sessions\"}\n‚Üê {\"ok\": true, \"sessions\": [{\"name\": \"...\", \"host\": \"...\", \"status\": \"...\"}]}\n\n// Blocking ask (waits for Claude response)\n{\"cmd\": \"ask\", \"session\": \"project-x\", \"text\": \"...\", \"from\": \"orchestrator\"}\n‚Üê {\"ok\": true, \"response\": \"...\", \"duration_ms\": 8500}\n\n// Send without waiting\n{\"cmd\": \"send\", \"session\": \"project-x\", \"text\": \"...\", \"from\": \"orchestrator\"}\n‚Üê {\"ok\": true, \"message_id\": 12345}\n\n// Get message history\n{\"cmd\": \"history\", \"session\": \"project-x\", \"after\": 12345, \"limit\": 50}\n‚Üê {\"ok\": true, \"messages\": [{\"id\": ..., \"from\": \"...\", \"text\": \"...\", \"ts\": ...}]}\n\n// Subscribe to events (persistent connection)\n{\"cmd\": \"subscribe\", \"sessions\": [\"project-x\", \"project-y\"]}\n‚Üê {\"event\": \"subscribed\", \"sessions\": [...]}\n‚Üê {\"event\": \"message\", \"session\": \"...\", \"from\": \"...\", \"text\": \"...\"}\n‚Üê {\"event\": \"status\", \"session\": \"...\", \"status\": \"idle|active\"}\n```\n\n### Telegram Integration\n- All API messages appear in Telegram topic: `ü§ñ [agent-name] message text`\n- Human can see and participate in the conversation\n- History command returns both API and human messages\n\n## Labels\nepic, api, local-ipc","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-09T15:51:50.994176444Z","created_by":"wlad","updated_at":"2026-01-16T16:13:45.018027008Z"}
{"id":"ccc-dcp.1","title":"–ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API —Å—Ö–µ–º—ã –∏ –≤—ã–±–æ—Ä –º–µ—Ö–∞–Ω–∏–∑–º–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ –æ—Ç–≤–µ—Ç–æ–≤","description":"## –†–µ—à–µ–Ω–∏—è –ø–æ –¥–∏–∑–∞–π–Ω—É API\n\n### –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç\n- **Unix Socket** (`~/.ccc.sock`) ‚Äî –ª–æ–∫–∞–ª—å–Ω–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –Ω–∞ —Ç–æ–º –∂–µ —Ö–æ—Å—Ç–µ\n- **JSON –ø—Ä–æ—Ç–æ–∫–æ–ª** ‚Äî newline-delimited JSON (–æ–¥–Ω–∞ —Å—Ç—Ä–æ–∫–∞ = –æ–¥–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ)\n- –ù–ï HTTP ‚Äî –∏–∑–±—ã—Ç–æ—á–Ω–æ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ IPC\n\n### –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è\n1. **–ó–∞–ø—Ä–æ—Å-–æ—Ç–≤–µ—Ç** ‚Äî –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é —Å–µ—Å—Å–∏—é, –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç\n2. **–§–æ–Ω–æ–≤—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** ‚Äî –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è, –æ–±–Ω–æ–≤–ª—è–µ—Ç —Å–≤–æ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç\n\n### API –∫–æ–º–∞–Ω–¥—ã\n\n| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ |\n|---------|----------|------------|\n| `sessions` | –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–µ—Å—Å–∏–π | –∫–æ—Ä–æ—Ç–∫–æ–µ |\n| `ask` | –ë–ª–æ–∫–∏—Ä—É—é—â–∏–π –∑–∞–ø—Ä–æ—Å-–æ—Ç–≤–µ—Ç | –∫–æ—Ä–æ—Ç–∫–æ–µ (–¥–æ 5 –º–∏–Ω) |\n| `send` | –û—Ç–ø—Ä–∞–≤–∏—Ç—å –±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è | –∫–æ—Ä–æ—Ç–∫–æ–µ |\n| `history` | –ü–æ–ª—É—á–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π | –∫–æ—Ä–æ—Ç–∫–æ–µ |\n| `subscribe` | –ü–æ—Ç–æ–∫ —Å–æ–±—ã—Ç–∏–π | persistent |\n\n### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram\n- –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ API –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è –≤ Telegram —Ç–æ–ø–∏–∫\n- –§–æ—Ä–º–∞—Ç: `ü§ñ [agent-name] —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è`\n- –ß–µ–ª–æ–≤–µ–∫ –≤–∏–¥–∏—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∏ –º–æ–∂–µ—Ç —É—á–∞—Å—Ç–≤–æ–≤–∞—Ç—å\n\n### –§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π\n–°–º. –ø–æ–ª–Ω—É—é —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é –≤ –æ–ø–∏—Å–∞–Ω–∏–∏ epic ccc-dcp","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T15:52:01.161544466Z","created_by":"wlad","updated_at":"2026-01-16T16:14:09.121703563Z","closed_at":"2026-01-16T16:14:09.121703563Z","close_reason":"Design decisions documented in epic description","dependencies":[{"issue_id":"ccc-dcp.1","depends_on_id":"ccc-dcp","type":"parent-child","created_at":"2026-01-09T15:52:01.16268526Z","created_by":"wlad"}]}
{"id":"ccc-dcp.10","title":"Implement message history storage (JSONL files)","description":"Store all messages in JSONL files for history retrieval.\n\n## Structure\n```\n~/.ccc/history/\u003ctopic_id\u003e/messages/\u003cYYYY-MM-DD-HH\u003e.jsonl\n```\n\n## Message format\n```jsonl\n{\"id\":123,\"ts\":1705412345,\"from\":\"human|claude|api\",\"text\":\"...\"}\n{\"id\":124,\"ts\":1705412400,\"from\":\"human\",\"type\":\"voice\",\"path\":\"...\",\"transcription\":\"...\"}\n{\"id\":125,\"ts\":1705412500,\"from\":\"api\",\"agent\":\"orchestrator\",\"text\":\"...\"}\n```\n\n## Implementation\n- Append message on every incoming/outgoing message\n- Create new file each hour\n- Store artifact paths (not copies)\n- No rotation (keep forever)\n\nThis is a prerequisite for the `history` command.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-16T16:23:16.883904115Z","created_by":"wlad","updated_at":"2026-01-16T16:31:01.926065361Z","closed_at":"2026-01-16T16:31:01.926065361Z","close_reason":"Implemented Unix socket server and message history storage","dependencies":[{"issue_id":"ccc-dcp.10","depends_on_id":"ccc-dcp","type":"parent-child","created_at":"2026-01-16T16:23:16.885065915Z","created_by":"wlad"}]}
{"id":"ccc-dcp.2","title":"Unix Socket server and JSON protocol handler","description":"–°–æ–∑–¥–∞—Ç—å internal/api/, –∑–∞–ø—É—Å–∫ HTTP —Å–µ—Ä–≤–µ—Ä–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å Telegram polling","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T15:52:01.185431503Z","created_by":"wlad","updated_at":"2026-01-16T16:31:01.919884842Z","closed_at":"2026-01-16T16:31:01.919884842Z","close_reason":"Implemented Unix socket server and message history storage","dependencies":[{"issue_id":"ccc-dcp.2","depends_on_id":"ccc-dcp","type":"parent-child","created_at":"2026-01-09T15:52:01.186544914Z","created_by":"wlad"},{"issue_id":"ccc-dcp.2","depends_on_id":"ccc-dcp.1","type":"blocks","created_at":"2026-01-09T15:52:07.64521593Z","created_by":"wlad"}]}
{"id":"ccc-dcp.3","title":"Implement 'sessions' command","description":"–°–ø–∏—Å–æ–∫ —Å–µ—Å—Å–∏–π –∏ –¥–µ—Ç–∞–ª–∏ —Å–µ—Å—Å–∏–∏","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T15:52:01.207854141Z","created_by":"wlad","updated_at":"2026-01-16T16:31:22.789589496Z","closed_at":"2026-01-16T16:31:22.789589496Z","close_reason":"All commands implemented in initial API implementation","dependencies":[{"issue_id":"ccc-dcp.3","depends_on_id":"ccc-dcp","type":"parent-child","created_at":"2026-01-09T15:52:01.208897041Z","created_by":"wlad"},{"issue_id":"ccc-dcp.3","depends_on_id":"ccc-dcp.2","type":"blocks","created_at":"2026-01-09T15:52:07.664982237Z","created_by":"wlad"}]}
{"id":"ccc-dcp.4","title":"Implement 'ask' and 'send' commands","description":"–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Å–µ—Å—Å–∏—é —á–µ—Ä–µ–∑ API","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T15:52:01.230601132Z","created_by":"wlad","updated_at":"2026-01-16T16:31:22.79546856Z","closed_at":"2026-01-16T16:31:22.79546856Z","close_reason":"All commands implemented in initial API implementation","dependencies":[{"issue_id":"ccc-dcp.4","depends_on_id":"ccc-dcp","type":"parent-child","created_at":"2026-01-09T15:52:01.231585195Z","created_by":"wlad"},{"issue_id":"ccc-dcp.4","depends_on_id":"ccc-dcp.2","type":"blocks","created_at":"2026-01-09T15:52:07.684680527Z","created_by":"wlad"}]}
{"id":"ccc-dcp.5","title":"–î–æ–±–∞–≤–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ API —Å–æ–æ–±—â–µ–Ω–∏–π –≤ Telegram","description":"–°–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ API –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —Ç–æ–ø–∏–∫–µ","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T15:52:01.254524226Z","created_by":"wlad","updated_at":"2026-01-16T16:31:22.800461014Z","closed_at":"2026-01-16T16:31:22.800461014Z","close_reason":"All commands implemented in initial API implementation","dependencies":[{"issue_id":"ccc-dcp.5","depends_on_id":"ccc-dcp","type":"parent-child","created_at":"2026-01-09T15:52:01.255585768Z","created_by":"wlad"},{"issue_id":"ccc-dcp.5","depends_on_id":"ccc-dcp.4","type":"blocks","created_at":"2026-01-09T15:52:07.704967968Z","created_by":"wlad"}]}
{"id":"ccc-dcp.6","title":"Implement 'history' and 'subscribe' commands","description":"–î–æ—Å—Ç–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–æ–≤ –æ—Ç Claude –∫ API –∫–ª–∏–µ–Ω—Ç—É","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T15:52:01.276264799Z","created_by":"wlad","updated_at":"2026-01-16T16:31:22.804701232Z","closed_at":"2026-01-16T16:31:22.804701232Z","close_reason":"All commands implemented in initial API implementation","dependencies":[{"issue_id":"ccc-dcp.6","depends_on_id":"ccc-dcp","type":"parent-child","created_at":"2026-01-09T15:52:01.277268664Z","created_by":"wlad"},{"issue_id":"ccc-dcp.6","depends_on_id":"ccc-dcp.4","type":"blocks","created_at":"2026-01-09T15:52:07.724676633Z","created_by":"wlad"},{"issue_id":"ccc-dcp.6","depends_on_id":"ccc-dcp.10","type":"blocks","created_at":"2026-01-16T16:23:21.59698202Z","created_by":"wlad"}]}
{"id":"ccc-dcp.7","title":"Add optional API key authentication","description":"API keys, –∫–æ–º–∞–Ω–¥—ã ccc api-key create/revoke","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-09T15:52:01.299668121Z","created_by":"wlad","updated_at":"2026-01-16T16:14:02.27954494Z","dependencies":[{"issue_id":"ccc-dcp.7","depends_on_id":"ccc-dcp","type":"parent-child","created_at":"2026-01-09T15:52:01.301093293Z","created_by":"wlad"},{"issue_id":"ccc-dcp.7","depends_on_id":"ccc-dcp.2","type":"blocks","created_at":"2026-01-09T15:52:07.744485761Z","created_by":"wlad"}]}
{"id":"ccc-dcp.8","title":"–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è External Agent API","description":"README —Ä–∞–∑–¥–µ–ª, curl –ø—Ä–∏–º–µ—Ä—ã, Python –∫–ª–∏–µ–Ω—Ç","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T15:52:01.322642977Z","created_by":"wlad","updated_at":"2026-01-16T16:45:25.798543658Z","closed_at":"2026-01-16T16:45:25.798543658Z","close_reason":"Documentation created in docs/local-api.md","dependencies":[{"issue_id":"ccc-dcp.8","depends_on_id":"ccc-dcp","type":"parent-child","created_at":"2026-01-09T15:52:01.323673326Z","created_by":"wlad"},{"issue_id":"ccc-dcp.8","depends_on_id":"ccc-dcp.6","type":"blocks","created_at":"2026-01-09T15:52:07.76373352Z","created_by":"wlad"}]}
{"id":"ccc-dcp.9","title":"Migrate history when moving project between topics","description":"When a project is moved from one Telegram topic to another (or topic is renamed), migrate history files:\n\n1. Detect topic change (old topic deleted, new topic created for same session)\n2. Move all files from `~/.ccc/history/\u003cold_topic_id\u003e/` to `~/.ccc/history/\u003cnew_topic_id\u003e/`\n3. Merge if new topic already has history\n\nThis ensures history continuity when reorganizing Telegram topics.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-16T16:23:03.450314331Z","created_by":"wlad","updated_at":"2026-01-16T16:23:03.450314331Z","dependencies":[{"issue_id":"ccc-dcp.9","depends_on_id":"ccc-dcp","type":"parent-child","created_at":"2026-01-16T16:23:03.45541171Z","created_by":"wlad"}]}
{"id":"ccc-dx8","title":"Add inline action buttons to status messages","description":"Add inline keyboard buttons to session messages: [Restart] [Kill] [View Logs]. Reduces need to type commands.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-09T14:38:43.871604438Z","created_by":"wlad","updated_at":"2026-01-09T14:38:43.871604438Z","dependencies":[{"issue_id":"ccc-dx8","depends_on_id":"ccc-c5a","type":"blocks","created_at":"2026-01-09T14:39:27.972645802Z","created_by":"wlad"}]}
{"id":"ccc-e7s","title":"ccc_ask truncates long responses (getLastClaudeResponse capture incomplete)","description":"Reported by Loki: ccc_ask on rtb-full returned 2 commits instead of 3 from git log. Either getLastClaudeResponse captures incomplete tmux pane content (response extends beyond capture window), or multi-line response gets truncated somewhere in the pipeline. Need to investigate: 1) capture-pane -S -200 may not be enough for long responses, 2) response parsing between two prompt markers may miss content, 3) possible truncation in JSON encoding or nc output.","status":"closed","priority":1,"issue_type":"bug","owner":"wlad@wlad.com.ua","created_at":"2026-02-19T15:14:41.054821248Z","created_by":"wlad","updated_at":"2026-02-23T00:41:00.121067908Z","closed_at":"2026-02-23T00:41:00.121067908Z","close_reason":"Resolved by switching from capture-pane to transcript JSONL (commit 7183741). Transcript has complete response regardless of terminal buffer size."}
{"id":"ccc-ere","title":"Add ccc_screenshot tool to OpenClaw plugin","description":"Add ccc_screenshot tool to OpenClaw CCC extension (on msi host, openclaw repo). API endpoint ready: {cmd:screenshot, session:name, limit:50} returns raw tmux capture-pane in response field. Plugin files are in openclaw/extensions/ccc/ on msi. Approved by Vlad.","status":"open","priority":2,"issue_type":"task","owner":"wlad@wlad.com.ua","created_at":"2026-02-19T15:26:52.788075124Z","created_by":"wlad","updated_at":"2026-02-19T15:26:52.788075124Z"}
{"id":"ccc-fwf","title":"Extract tmux package from main.go (session management)","description":"tmux session creation, attachment, killing should be in internal/tmux package.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T14:27:19.187954521Z","created_by":"wlad","updated_at":"2026-01-09T14:48:30.56894965Z","closed_at":"2026-01-09T14:48:30.56894965Z","close_reason":"Closed","dependencies":[{"issue_id":"ccc-fwf","depends_on_id":"ccc-5wp","type":"blocks","created_at":"2026-01-09T14:28:13.907484555Z","created_by":"wlad"}]}
{"id":"ccc-gze","title":"Configurable notification preferences","description":"Add config options: notify_on_complete, notify_on_error, notify_on_question. Allow per-session overrides. Quiet mode for long-running tasks.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-09T14:39:17.425344968Z","created_by":"wlad","updated_at":"2026-01-09T14:39:17.425344968Z","dependencies":[{"issue_id":"ccc-gze","depends_on_id":"ccc-c5a","type":"blocks","created_at":"2026-01-09T14:39:28.102486336Z","created_by":"wlad"}]}
{"id":"ccc-i4y","title":"Add graceful shutdown for ccc listen","description":"Handle SIGTERM/SIGINT properly. Finish in-flight requests, save state, close connections cleanly.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-09T14:27:58.826342894Z","created_by":"wlad","updated_at":"2026-01-09T14:27:58.826342894Z","dependencies":[{"issue_id":"ccc-i4y","depends_on_id":"ccc-9l2","type":"blocks","created_at":"2026-01-09T14:28:18.45835514Z","created_by":"wlad"}]}
{"id":"ccc-j0k","title":"Support message threading (reply to original)","description":"When Claude responds, reply to the user's original message using reply_to_message_id. Creates visual thread in chat.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-09T14:38:58.629093818Z","created_by":"wlad","updated_at":"2026-01-09T14:38:58.629093818Z","dependencies":[{"issue_id":"ccc-j0k","depends_on_id":"ccc-c5a","type":"blocks","created_at":"2026-01-09T14:39:28.028389382Z","created_by":"wlad"}]}
{"id":"ccc-jeo","title":"Bug: ccc –Ω–µ –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å —Å–µ—Å—Å–∏—é –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ - tmux socket –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç","description":"–ü—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å–∏—Å—Ç–µ–º—ã, –ø–æ–∫–∞ tmux –Ω–µ –±—ã–ª –∑–∞–ø—É—â–µ–Ω, ccc –ø–æ–ª—É—á–∞–µ—Ç –æ—à–∏–±–∫—É:\n\nerror connecting to /tmp/tmux-1000/default (No such file or directory)\n\n–ü—Ä–∏—á–∏–Ω–∞: tmux —Å–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω, —Å–æ–∫–µ—Ç –Ω–µ —Å–æ–∑–¥–∞–Ω.\n\n–†–µ—à–µ–Ω–∏–µ: –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —ç—Ç—É –æ—à–∏–±–∫—É (–∏–ª–∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Å–æ–∫–µ—Ç–∞) –∏ –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –∑–∞–ø—É—Å–∫–∞—Ç—å tmux new-session –±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è -S —Å–æ–∫–µ—Ç–∞, —á—Ç–æ–±—ã tmux —Å–æ–∑–¥–∞–ª –µ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –õ–∏–±–æ —è–≤–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å tmux server –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º —Å–µ—Å—Å–∏–∏.","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-16T12:34:35.746507536Z","created_by":"wlad","updated_at":"2026-01-16T12:43:39.598652956Z","closed_at":"2026-01-16T12:43:39.598652956Z","close_reason":"Closed"}
{"id":"ccc-l99","title":"Add e2e tests for Telegram bot commands","description":"Test /new, /kill, /list commands with mock Telegram API. Ensure commands work correctly end-to-end.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-09T14:27:31.981153437Z","created_by":"wlad","updated_at":"2026-01-09T14:27:31.981153437Z","dependencies":[{"issue_id":"ccc-l99","depends_on_id":"ccc-nwv","type":"blocks","created_at":"2026-01-09T14:28:15.805082528Z","created_by":"wlad"}]}
{"id":"ccc-lb3","title":"Bug: –°–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ø–∞–¥–∞—é—Ç –≤ bash –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ Claude Code","description":"## –ü—Ä–æ–±–ª–µ–º–∞\n–ö–æ–≥–¥–∞ Claude Code –ø–∞–¥–∞–µ—Ç/–∫—Ä–∞—à–∏—Ç—Å—è, tmux —Å–µ—Å—Å–∏—è –æ—Å—Ç–∞—ë—Ç—Å—è –∞–∫—Ç–∏–≤–Ω–æ–π. –°–æ–æ–±—â–µ–Ω–∏—è –∏–∑ Telegram –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –≤ tmux —á–µ—Ä–µ–∑ send-keys, –Ω–æ –ø–æ–ø–∞–¥–∞—é—Ç –≤ bash shell –≤–º–µ—Å—Ç–æ Claude Code.\n\n## –¢–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ\n1. Claude Code –ø–∞–¥–∞–µ—Ç –≤ tmux —Å–µ—Å—Å–∏–∏\n2. tmux —Å–µ—Å—Å–∏—è –æ—Å—Ç–∞—ë—Ç—Å—è (bash prompt)\n3. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram\n4. CCC –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –≤ tmux —á–µ—Ä–µ–∑ send-keys\n5. –°–æ–æ–±—â–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–∞–∫ bash –∫–æ–º–∞–Ω–¥–∞ (!)\n\n## –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ\nCCC –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ Claude Code –¥–æ/–ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å–ª–∏ Claude Code –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.\n\n## –í–æ–∑–º–æ–∂–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è\n1. –ü—Ä–æ–≤–µ—Ä—è—Ç—å –ø—Ä–æ—Ü–µ—Å—Å claude –≤ tmux –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π\n2. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å tmux hooks –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞\n3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–µ–¥–ª–∞–≥–∞—Ç—å –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫\n\n## –°–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏\n- –ó–∞–≤–∏—Å–∏—Ç –æ—Ç ccc-006 (Add /status command)\n\n## –†–∏—Å–∫–∏\n- –°–æ–æ–±—â–µ–Ω–∏—è –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω–∏—Ç—å—Å—è –∫–∞–∫ shell –∫–æ–º–∞–Ω–¥—ã (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-01-09T15:52:17.299723859Z","created_by":"wlad","updated_at":"2026-01-16T15:31:13.996636698Z","closed_at":"2026-01-16T15:31:13.996636698Z","close_reason":"Auto-restart implemented instead of warning message","dependencies":[{"issue_id":"ccc-lb3","depends_on_id":"ccc-006","type":"blocks","created_at":"2026-01-09T15:52:21.505242214Z","created_by":"wlad"}]}
{"id":"ccc-lm4","title":"Add message reactions for delivery confirmation","description":"When user sends message to topic, add reaction (e.g. üëÄ or ‚úì) to confirm bot received it. Use setMessageReaction API. Change to ‚úÖ when Claude responds.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-09T14:38:40.752641297Z","created_by":"wlad","updated_at":"2026-01-09T14:38:40.752641297Z","dependencies":[{"issue_id":"ccc-lm4","depends_on_id":"ccc-c5a","type":"blocks","created_at":"2026-01-09T14:39:27.936099968Z","created_by":"wlad"}]}
{"id":"ccc-lmt","title":"Debug: add raw capture-pane logging to getLastClaudeResponse","status":"closed","priority":0,"issue_type":"bug","owner":"wlad@wlad.com.ua","created_at":"2026-02-19T13:04:36.865926379Z","created_by":"wlad","updated_at":"2026-02-19T13:04:42.987304219Z","closed_at":"2026-02-19T13:04:42.987304219Z","close_reason":"Debug logging added to getLastClaudeResponse - logs raw capture-pane, each FILTERED/KEPT line, and final result"}
{"id":"ccc-lun","title":"Add retry logic for transient Telegram API failures","description":"Telegram API calls can fail transiently. Add exponential backoff retry for sendMessage, createForumTopic, etc.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-09T14:27:47.878181347Z","created_by":"wlad","updated_at":"2026-01-09T14:27:47.878181347Z","dependencies":[{"issue_id":"ccc-lun","depends_on_id":"ccc-9l2","type":"blocks","created_at":"2026-01-09T14:28:18.439907019Z","created_by":"wlad"}]}
{"id":"ccc-n1w","title":"Show session status emoji in topic name","description":"Rename topic to include status: 'üü¢ project' when running, '‚ö™ project' when stopped. Update on session start/stop.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-09T14:38:42.255116383Z","created_by":"wlad","updated_at":"2026-01-09T14:38:42.255116383Z","dependencies":[{"issue_id":"ccc-n1w","depends_on_id":"ccc-c5a","type":"blocks","created_at":"2026-01-09T14:39:27.953909791Z","created_by":"wlad"}]}
{"id":"ccc-nbl","title":"Fix hook installation to not overwrite existing hooks - check and append instead","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-19T04:35:34.709496723Z","created_by":"wlad","updated_at":"2026-01-19T04:59:09.600747015Z","closed_at":"2026-01-19T04:59:09.600747015Z","close_reason":"Implemented addHookToEvent() function that checks for existing hooks before adding"}
{"id":"ccc-nig","title":"Markdown formatting for Claude responses","description":"Enable parse_mode=MarkdownV2 for Claude messages. Properly escape special characters. Improves code block rendering.","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-09T14:39:12.591839244Z","created_by":"wlad","updated_at":"2026-01-09T14:39:12.591839244Z","dependencies":[{"issue_id":"ccc-nig","depends_on_id":"ccc-c5a","type":"blocks","created_at":"2026-01-09T14:39:28.064860515Z","created_by":"wlad"}]}
{"id":"ccc-nwv","title":"Testing: Expand test coverage with integration and e2e tests","status":"open","priority":2,"issue_type":"epic","created_at":"2026-01-09T14:27:02.623394576Z","created_by":"wlad","updated_at":"2026-01-09T14:27:02.623394576Z"}
{"id":"ccc-oo4","title":"Epic: Hooks + Transcript + Interactive Q\u0026A","description":"Replace capture-pane approach with Claude Code hooks + transcript JSONL for response capture. Add AskUserQuestion support via Telegram AND API.\n\n## What gets removed:\n- captureResponseAsync() ‚Äî replaced by Stop hook\n- captureClaudeResponse() ‚Äî replaced by extractLastTurn()\n- isClaudeUIArtifact() ‚Äî not needed with transcript JSONL\n- getLastClaudeResponse() ‚Äî replaced by extractLastTurn()\n\n## What stays:\n- captureTmuxPane() ‚Äî for screenshot API only\n- checkClaudeState() ‚Äî for busy/idle detection\n- isClaudeRunning() ‚Äî for crash detection\n\n## Remote sessions:\nHooks fire locally on remote machine. Client-mode CCC forwards hook data to server. No transport changes needed.\n\n## Subtasks:\n1. Hooks infrastructure (hook-stop + extractLastTurn + installHook)\n2. AskUserQuestion in Telegram (PreToolUse hook + inline keyboard + callback)\n3. AskUserQuestion in API (new ‚Äî expose questions and accept answers via CCC API)\n4. Testing all three scenarios\n\nReplaces: ccc-x2o, ccc-zsf (both closed)","status":"open","priority":1,"issue_type":"feature","owner":"wlad@wlad.com.ua","created_at":"2026-02-23T00:28:23.929206921Z","created_by":"wlad","updated_at":"2026-02-23T00:28:23.929206921Z"}
{"id":"ccc-p2y","title":"Add SSH connection pooling/reuse for remote hosts","description":"Current implementation creates new SSH connection for each command. Pool connections for better performance with remote hosts.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-09T14:27:45.763920999Z","created_by":"wlad","updated_at":"2026-01-09T14:27:45.763920999Z"}
{"id":"ccc-q39","title":"Show continuous typing indicator while Claude processes","description":"BUG: Typing indicator shows activity even when Claude is waiting for user input. Need to detect idle state (waiting for input) and stop typing indicator. Current implementation doesn't distinguish between 'processing' and 'waiting for input' states.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-01-09T14:38:38.309315055Z","created_by":"wlad","updated_at":"2026-01-16T14:18:56.118227565Z","closed_at":"2026-01-16T14:18:56.118227565Z","close_reason":"Implemented auto-stop typing via tmux state detection","dependencies":[{"issue_id":"ccc-q39","depends_on_id":"ccc-c5a","type":"blocks","created_at":"2026-01-09T14:39:27.917152036Z","created_by":"wlad"}]}
{"id":"ccc-qix","title":"Extract hook package from main.go (Claude hook handling)","description":"Hook data parsing, message forwarding should be in internal/hook package.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T14:27:20.067389033Z","created_by":"wlad","updated_at":"2026-01-09T14:48:30.588410263Z","closed_at":"2026-01-09T14:48:30.588410263Z","close_reason":"Closed","dependencies":[{"issue_id":"ccc-qix","depends_on_id":"ccc-5wp","type":"blocks","created_at":"2026-01-09T14:28:13.925771336Z","created_by":"wlad"}]}
{"id":"ccc-qua","title":"Add continue API command for session restart","status":"in_progress","priority":1,"issue_type":"feature","owner":"wlad@wlad.com.ua","created_at":"2026-02-23T20:07:35.787186641Z","created_by":"wlad","updated_at":"2026-02-23T20:08:16.212777296Z"}
{"id":"ccc-sjk","title":"Add health check endpoint for service monitoring","description":"Add HTTP endpoint for health checks. Useful for systemd watchdog or external monitoring.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-09T14:27:50.239514746Z","created_by":"wlad","updated_at":"2026-01-09T14:27:50.239514746Z"}
{"id":"ccc-v0h","title":"Extract config package from main.go (Config struct, load/save, migration)","description":"main.go:39-250 contains Config struct and related functions. Extract to internal/config package.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T14:27:17.225989252Z","created_by":"wlad","updated_at":"2026-01-09T14:44:54.870618507Z","closed_at":"2026-01-09T14:44:54.870618507Z","close_reason":"Closed","dependencies":[{"issue_id":"ccc-v0h","depends_on_id":"ccc-5wp","type":"blocks","created_at":"2026-01-09T14:28:13.870868907Z","created_by":"wlad"}]}
{"id":"ccc-wbt","title":"Document config file format with JSON schema","description":"Create JSON schema for ~/.ccc.json. Enables IDE autocomplete and validation.","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-09T14:27:51.406830007Z","created_by":"wlad","updated_at":"2026-01-09T14:27:51.406830007Z"}
{"id":"ccc-wj5","title":"Add Telegram notification on context compaction (PreCompact hook)","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-19T04:35:33.400618216Z","created_by":"wlad","updated_at":"2026-01-19T04:35:33.400618216Z"}
{"id":"ccc-x2o","title":"Implement hooks + transcript JSONL for response capture (merged from ccc-zsf)","description":"Replace capture-pane + isClaudeUIArtifact approach with hooks + transcript JSONL (merged from ccc-zsf research).\n\n## Architecture (from upstream analysis)\n\n### Two hooks to install:\n1. **Stop hook** (hook-stop): fires when Claude finishes a turn. Receives stdin JSON with transcriptPath. Calls extractLastTurn() to parse JSONL transcript and extract text blocks from last assistant turn. Sends to Telegram with ‚úÖ prefix. This replaces captureResponseAsync polling.\n\n2. **PreToolUse hook** (hook-permission): fires before each tool call. Handles two cases:\n   - AskUserQuestion: sends inline keyboard buttons to Telegram, user presses button, listener sends arrow keys + Enter to tmux to select option\n   - Other tools (with OTP enabled): sends permission request to Telegram, waits for TOTP code\n\n### Key function: extractLastTurn(transcriptPath)\n- Reads JSONL file (~/.claude/projects/*/sessions/*.jsonl)\n- Finds last real user message (skipping tool_results)\n- Collects assistant text blocks after it\n- Handles streaming dedup by requestId (last entry with text wins)\n- Returns []string of text blocks\n\n### Migration plan:\n1. Add hook-stop and hook-permission subcommands to ccc binary\n2. Port extractLastTurn() from upstream hooks.go\n3. Port handlePermissionHook() for AskUserQuestion forwarding\n4. Add installHook/uninstallHook commands\n5. Add CallbackQuery handling in Telegram listener (arrow keys to tmux)\n6. Keep captureResponseAsync as fallback for sessions without hooks installed\n7. Remove capture-pane based getLastClaudeResponse once hooks are stable\n\n### Benefits:\n- Eliminates ALL isClaudeUIArtifact filter issues\n- Eliminates echo detection problems\n- Eliminates response truncation (ccc-e7s)\n- Enables AskUserQuestion forwarding (new capability)\n- Enables OTP permissions (ccc-xxo depends on this)\n\nRef: upstream hooks.go, commands.go (callback handling)","status":"closed","priority":1,"issue_type":"feature","owner":"wlad@wlad.com.ua","created_at":"2026-02-20T19:54:39.230612186Z","created_by":"wlad","updated_at":"2026-02-23T00:28:17.239534461Z","closed_at":"2026-02-23T00:28:17.239534461Z","close_reason":"Replaced by new epic with subtasks for hooks + transcript + interactive Q\u0026A","dependencies":[{"issue_id":"ccc-x2o","depends_on_id":"ccc-zsf","type":"blocks","created_at":"2026-02-20T19:54:46.230805963Z","created_by":"wlad"}]}
{"id":"ccc-x6h","title":"AskUserQuestion via CCC API (for programmatic agents)","description":"NEW capability not in upstream. Allow programmatic agents (like OpenClaw/Loki) to see Claude's questions and answer them via CCC API.\n\n## Design:\n\n### Storing questions:\nWhen hook-permission receives AskUserQuestion:\n- Store question in a per-session pending queue (file or in-memory)\n- Include: sessionName, questions[], timestamp, status (pending/answered)\n- Path: ~/.ccc/questions/{sessionName}.json\n\n### New API commands:\n\n1. `{\"cmd\":\"questions\",\"session\":\"name\"}` ‚Äî list pending questions\n   Response: {ok:true, questions:[{question, header, options[], timestamp}]}\n\n2. `{\"cmd\":\"answer\",\"session\":\"name\",\"question_index\":0,\"option_index\":1}` ‚Äî answer a question\n   - Sends arrow keys to tmux (same as Telegram callback)\n   - Marks question as answered\n   - Auto-submits if last question\n   Response: {ok:true}\n\n### History integration:\n- Questions appear in history as from:'claude' with special marker\n- Answers appear as from:'human'\n- Agents can poll history to detect new questions\n\n### Concurrency:\n- Telegram and API can both answer ‚Äî first one wins\n- After answer via either path, question removed from pending queue\n- tmux send-keys is idempotent (worst case: extra Down/Enter which is harmless with proper guards)\n\n### Timeout:\n- Questions expire after 5 minutes (Claude Code's own timeout)\n- Expired questions auto-cleaned on next poll","status":"closed","priority":1,"issue_type":"feature","owner":"wlad@wlad.com.ua","created_at":"2026-02-23T00:28:48.748727759Z","created_by":"wlad","updated_at":"2026-02-23T01:24:35.009039382Z","closed_at":"2026-02-23T01:24:35.009039382Z","close_reason":"questions/answer API endpoints implemented, tested, deployed to all machines","dependencies":[{"issue_id":"ccc-x6h","depends_on_id":"ccc-0hv","type":"blocks","created_at":"2026-02-23T00:28:59.408817616Z","created_by":"wlad"}]}
{"id":"ccc-xxo","title":"Add OTP permission mode for remote sessions","description":"Port OTP (TOTP) permission system from upstream (otp.go). Allows secure approval of dangerous operations on remote sessions via Telegram OTP code. Features: QR code for authenticator setup, per-session grants with 5min TTL, failed attempt tracking. Ref: upstream otp.go (177 lines).","status":"open","priority":3,"issue_type":"feature","owner":"wlad@wlad.com.ua","created_at":"2026-02-20T19:54:39.357868791Z","created_by":"wlad","updated_at":"2026-02-20T19:54:39.357868791Z","dependencies":[{"issue_id":"ccc-xxo","depends_on_id":"ccc-0hv","type":"blocks","created_at":"2026-02-23T00:28:59.493973996Z","created_by":"wlad"}]}
{"id":"ccc-y8x","title":"Extract telegram package from main.go (API calls, message handling)","description":"Telegram API calls (sendMessage, createForumTopic, etc.) should be in internal/telegram package.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-01-09T14:27:18.091721989Z","created_by":"wlad","updated_at":"2026-01-09T14:48:30.549134132Z","closed_at":"2026-01-09T14:48:30.549134132Z","close_reason":"Closed","dependencies":[{"issue_id":"ccc-y8x","depends_on_id":"ccc-5wp","type":"blocks","created_at":"2026-01-09T14:28:13.888581047Z","created_by":"wlad"}]}
{"id":"ccc-zsf","title":"Research Stop/Notification hooks as polling supplement","description":"Investigate upstream Stop/Notification hook approach (commit 4b70951). CAVEAT: we originally used hooks and switched to polling because Claude can ask user questions WITHOUT triggering Stop hook (Stop only fires on full completion, not on AskUserQuestion). Need to check: 1) Does upstream Notification hook solve this? 2) Can we use hybrid: transcript JSONL for reading responses + polling only for detecting 'Claude waiting for input' state? 3) Test edge cases: permission prompts, user questions, context compaction. This is research ‚Äî don't implement before understanding tradeoffs.","status":"closed","priority":2,"issue_type":"task","owner":"wlad@wlad.com.ua","created_at":"2026-02-20T19:54:39.313316328Z","created_by":"wlad","updated_at":"2026-02-23T00:24:31.197070334Z","closed_at":"2026-02-23T00:24:31.197070334Z","close_reason":"Merged into ccc-x2o: upstream analysis already completed, separate research not needed"}
